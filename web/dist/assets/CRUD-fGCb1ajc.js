import{p as ye,aj as be,s as re,ak as Fe,al as X,ai as U,am as Ce,an as ae,ao as Se,V as Pe,v as Ie,w as ie,ap as Ae,aq as oe,K as Q,X as q,E as _,G as x,ar as le,as as Oe,y as b,at as Te,au as ke,av as ge,aw as De,a3 as k,ax as V,ay as se,az as de,aA as _e,aB as ce,aC as j,aD as xe,aE as ue,aF as Z,aG as pe,aH as ee,f as A,aI as H,aJ as Me,k as he,L as fe,a5 as te,H as Re,aK as ve,aL as me,ac as Be,t as Ee,a4 as we,T as Qe,z as Ne,D as Le,aM as Ue,aN as qe,aO as Ve,aP as We,aQ as je}from"./index-CpG9c5oN.js";import{o as He}from"./omitBy-D0Ni9ktV.js";var Ge=be,$e=Ge(function(D,f,t){D[t?0:1].push(f)},function(){return[[],[]]}),ze=$e;const Ke=ye(ze);var Je=["selectedChange","columnSort","columnFilter","columnSearch","columnToggled","orderChange","rowClick","rowDbClick","rowMouseEnter","rowMouseLeave","selected"],Ye=function(D){re(f,D);function f(t){var e=D.call(this,t)||this;e.filterOnEvent=Fe(function(d){return He(d,function(c,h){return!Je.includes(h)})}),e.controlRef=e.controlRef.bind(e),e.handleFilterReset=e.handleFilterReset.bind(e),e.handleFilterSubmit=e.handleFilterSubmit.bind(e),e.handleFilterInit=e.handleFilterInit.bind(e),e.handleAction=e.handleAction.bind(e),e.handleBulkAction=e.handleBulkAction.bind(e),e.handleChangePage=e.handleChangePage.bind(e),e.handleBulkGo=e.handleBulkGo.bind(e),e.handleDialogConfirm=e.handleDialogConfirm.bind(e),e.handleDialogClose=e.handleDialogClose.bind(e),e.handleItemChange=e.handleItemChange.bind(e),e.handleSave=e.handleSave.bind(e),e.handleSaveOrder=e.handleSaveOrder.bind(e),e.handleSelect=e.handleSelect.bind(e),e.handleChildPopOverOpen=e.handleChildPopOverOpen.bind(e),e.handleChildPopOverClose=e.handleChildPopOverClose.bind(e),e.search=e.search.bind(e),e.silentSearch=e.silentSearch.bind(e),e.handleQuery=e.handleQuery.bind(e),e.renderHeaderToolbar=e.renderHeaderToolbar.bind(e),e.renderFooterToolbar=e.renderFooterToolbar.bind(e),e.clearSelection=e.clearSelection.bind(e),e.filterItemIndex=e.filterItemIndex.bind(e);var r=t.location,n=t.store,i=t.pageField,a=t.perPageField,o=t.syncLocation;t.loadDataOnce;var l=e.getParseQueryOptions(t);e.mounted=!0,o&&r&&(r.query||r.search)?n.updateQuery(X(r,l),void 0,i,a):o&&!r&&window.location.search&&n.updateQuery(X(window.location,l),void 0,i,a),e.props.store.setFilterTogglable(!!e.props.filterTogglable,e.props.filterDefaultVisible),e.props.api&&e.props.store.updateData({items:[]});var s;return e.props.pickerMode&&(s=U(e.props))&&e.syncSelectedFromPicker(s),e}return f.prototype.componentDidMount=function(){var t=this.props,e=t.store,r=t.autoGenerateFilter,n=t.perPageField;t.columns,this.props.perPage&&!e.query[n||"perPage"]&&e.changePage(e.page,this.props.perPage),(!this.props.filter&&!r||e.filterTogggable&&!e.filterVisible)&&this.handleFilterInit({}),this.parentContainer=this.getClosestParentContainer()},f.prototype.componentDidUpdate=function(t){var e,r=this.props,n=t.store;Ce(["toolbar","headerToolbar","footerToolbar","bulkActions"],t,r)&&(this.renderHeaderToolbar=this.renderHeaderToolbar.bind(this),this.renderFooterToolbar=this.renderFooterToolbar.bind(this));var i;this.props.pickerMode&&!ae(i=U(this.props),U(t))&&!ae(i,n.selectedItems.concat())&&this.syncSelectedFromPicker(i),!!this.props.filterTogglable!=!!t.filterTogglable&&n.setFilterTogglable(!!r.filterTogglable,r.filterDefaultVisible);var a=!1;if(t.syncLocation&&t.location&&t.location.search!==r.location.search&&(n.updateQuery(X(r.location,this.getParseQueryOptions(r)),void 0,r.pageField,r.perPageField),a=!!(r.api&&Se(n.query,this.lastQuery,!1))),!a){if(t.api&&r.api&&Pe(t.api,r.api,n.fetchCtxOf(t.data,{pageField:t.pageField,perPageField:t.perPageField}),n.fetchCtxOf(r.data,{pageField:r.pageField,perPageField:r.perPageField})))a=!0;else if(!r.api&&Ie(r.source)&&r.data!==t.data){var o=ie(r.source,r.data,"| raw");(!this.lastData||this.lastData!==o)&&(n.initFromScope(r.data,r.source,{columns:(e=n.columns)!==null&&e!==void 0?e:r.columns}),this.props.pickerMode&&(i=U(this.props))&&this.syncSelectedFromPicker(i),this.lastData=o)}}a&&this.search()},f.prototype.componentWillUnmount=function(){var t,e;this.mounted=!1,clearTimeout(this.timer),(e=(t=this.filterOnEvent.cache).clear)===null||e===void 0||e.call(t)},f.prototype.getParseQueryOptions=function(t){var e,r=t.parsePrimitiveQuery,n={parsePrimitive:!!(Ae(r)?r!=null&&r.enable:r),primitiveTypes:(e=r==null?void 0:r.types)!==null&&e!==void 0?e:["boolean"]};return n},f.prototype.getClosestParentContainer=function(){var t=oe.findDOMNode(this),e=t==null?void 0:t.closest("[role=dialog]");return e},f.prototype.controlRef=function(t){for(;t&&t.getWrappedInstance;)t=t.getWrappedInstance();this.control=t},f.prototype.handleAction=function(t,e,r,n,i){var a=this;n===void 0&&(n=!1);var o=this.props,l=o.onAction,s=o.store,d=o.messages,c=o.pickerMode,h=o.env;o.pageField;var v=o.stopAutoRefreshWhenModalIsOpen;if(!s.loading)if(e.actionType==="dialog"){s.setCurrentAction(e,this.props.resolveDefinitions);var m=r.index,g=s.items.length;return v&&clearTimeout(this.timer),new Promise(function(P){s.openDialog(r,{hasNext:m<g-1,nextIndex:m+1,hasPrev:m>0,prevIndex:m-1,index:m},function(F,S){var y;(y=e.callback)===null||y===void 0||y.call(e,F,S),P({confirmed:F,value:S})},i||a.context)})}else if(e.actionType==="ajax"){s.setCurrentAction(e,this.props.resolveDefinitions);var u=r,p=e.redirect&&Q(e.redirect,u);return p&&e.blank&&h.jumpTo(p,e,u),q(e.api,u)?s.saveRemote(e.api,u,{successMessage:e.messages&&e.messages.success||d&&d.saveSuccess,errorMessage:e.messages&&e.messages.failed||d&&d.saveFailed}).then(function(P){return _(a,void 0,void 0,function(){var F,S;return x(this,function(y){switch(y.label){case 0:return F=k(r,P),e.feedback&&te(e.feedback,F)?[4,this.openFeedback(e.feedback,F)]:[3,2];case 1:y.sent(),v&&clearTimeout(this.timer),y.label=2;case 2:return S=e.redirect&&Q(e.redirect,F),S&&!e.blank&&h.jumpTo(S,e,F),e.reload?this.reloadTarget(V(e.reload,F),F):S||this.search(void 0,void 0,!0,!0),e.close&&this.closeTarget(e.close),[2]}})})}).catch(function(P){if(n||e.countDown)throw P}):void 0}else if(e.actionType==="reload"&&!e.target)this.reload();else{if(c&&(e.actionType==="confirm"||e.actionType==="submit"))return s.setCurrentAction(e,this.props.resolveDefinitions),Promise.resolve({items:s.selectedItems.concat()});if(e.onClick){s.setCurrentAction(e,this.props.resolveDefinitions);var C=e.onClick;typeof C=="string"&&(C=le(C,"event","props","data")),C&&C(t,this.props,r)}else l(t,e,r,n,i||this.context)}},f.prototype.handleBulkAction=function(t,e,r,n){var i=this,a,o=this.props,l=o.store,s=o.primaryField,d=o.onAction,c=o.messages,h=o.pageField,v=o.stopAutoRefreshWhenModalIsOpen,m=o.env;if(!(!t.length&&n.requireSelected!==!1)){var g=t.map(function(P){return P.hasOwnProperty(s)?P[s]:null}).filter(function(P){return P}).join(","),u=Oe([l.mergedData,{event:r},b(b(b({},t[0]),l.eventContext),{currentPageData:(((a=l.mergedData)===null||a===void 0?void 0:a.items)||[]).concat(),rows:t,items:t,ids:g})]),p=function(){if(n.actionType==="dialog")return i.handleAction(r,b(b({},n),{__from:"bulkAction"}),u);n.actionType==="ajax"?q(n.api,u)&&l.saveRemote(n.api,u,{successMessage:n.messages&&n.messages.success||c&&c.saveSuccess,errorMessage:n.messages&&n.messages.failed||c&&c.saveFailed}).then(function(P){return _(i,void 0,void 0,function(){var F,S,y;return x(this,function(I){switch(I.label){case 0:return F=k(u,P),n.feedback&&te(n.feedback,F)?[4,this.openFeedback(n.feedback,F)]:[3,2];case 1:I.sent(),v&&clearTimeout(this.timer),I.label=2;case 2:return n.reload?this.reloadTarget(V(n.reload,F),F):this.search((y={},y[h||"page"]=1,y),void 0,!0,!0),n.close&&this.closeTarget(n.close),S=n.redirect&&Q(n.redirect,F),S&&m.jumpTo(S,n,F),[2]}})})}).catch(function(){return null}):d&&d(r,n,u,!1,i.context)},C="";!n.ignoreConfirm&&n.confirmText&&m.confirm&&(C=Q(n.confirmText,u))?m.confirm(C,Q(n.confirmTitle,u)||void 0).then(function(P){return P&&p()}):p()}},f.prototype.handleItemAction=function(t,e){this.doAction(t,e)},f.prototype.handleFilterInit=function(t){var e,r=this.props,n=r.defaultParams,i=r.columns,a=r.matchFunc,o=r.store,l=r.orderBy,s=r.orderDir;r.dispatchEvent;var d=b({},n);l&&(d.orderBy=l,d.orderDir=s||"asc"),this.handleFilterSubmit(b(b(b({},d),t),o.query),!1,!0,this.props.initFetch!==!1,!0),o.setPristineQuery();var c=this.props,h=c.pickerMode,v=c.options;if(h){o.initFromScope({items:v||[]},"${items}",{columns:(e=o.columns)!==null&&e!==void 0?e:i,matchFunc:a});var m=void 0;(m=U(this.props))&&this.syncSelectedFromPicker(m)}},f.prototype.handleFilterReset=function(t,e){var r=this.props,n=r.store,i=r.syncLocation,a=r.env,o=r.pageField,l=r.perPageField,s={};Object.keys(t).forEach(function(d){return s[d]=""}),n.updateQuery(b(b({},s),n.pristineQuery),i&&a&&a.updateLocation?function(d){return a.updateLocation(d)}:void 0,o,l,!0),this.lastQuery=n.query,!(e!=null&&e.actionType&&["reset-and-submit","clear-and-submit","submit"].includes(e.actionType))&&this.search()},f.prototype.handleFilterSubmit=function(t,e,r,n,i){var a,o,l;e===void 0&&(e=!0),r===void 0&&(r=!1),n===void 0&&(n=!0),i===void 0&&(i=!1);var s=this.props,d=s.store,c=s.syncLocation,h=s.env,v=s.pageField,m=s.perPageField,g=s.loadDataOnceFetchOnFilter,u=s.parsePrimitiveQuery,p=this.getParseQueryOptions(this.props);t=b(b({},t),Te((l=(o=t==null?void 0:t.__super)===null||o===void 0?void 0:o.diff)!==null&&l!==void 0?l:{},function(C){return C===void 0})),t=c?ke(ge(t,void 0,!0)):t,u&&(t=De(t,p)),d.updateQuery(b(b({},t),(a={},a[v||"page"]=e?1:d.page,a)),c&&h&&h.updateLocation?function(C){return h.updateLocation(C,r)}:void 0,v,m),this.lastQuery=d.query,n&&this.search(void 0,void 0,void 0,g!==!1,i)},f.prototype.handleBulkGo=function(t,e,r){var n=this,i=this.props.store.selectedAction,a=this.props.env,o="";return i.confirmText&&(o=Q(i.confirmText,this.props.store.mergedData))?a.confirm(o).then(function(l){return l&&n.handleBulkAction(t,e,r,i)}):this.handleBulkAction(t,e,r,i)},f.prototype.handleDialogConfirm=function(t,e,r,n){var i,a,o,l,s=this.props,d=s.store,c=s.pageField,h=s.stopAutoRefreshWhenModalIsOpen,v=s.interval,m=s.silentPolling,g=s.env;d.closeDialog(!0,t);var u=d.action;if(h&&v&&(this.timer=setTimeout(m?this.silentSearch:this.search,Math.max(v,1e3))),e.actionType==="next"&&typeof r.nextIndex=="number"&&d.data.items[r.nextIndex])return this.handleAction(void 0,b({},u),k(k(d.data,{index:r.nextIndex}),d.data.items[r.nextIndex]));if(e.actionType==="prev"&&typeof r.prevIndex=="number"&&d.data.items[r.prevIndex])return this.handleAction(void 0,b({},u),k(k(d.data,{index:r.prevIndex}),d.data.items[r.prevIndex]));if(t.length){var p=t[0];r=k(r,p);var C=n[0];if(C&&C.props.type==="form")if(p&&p.__saved){var P=(a=e.reload)!==null&&a!==void 0?a:u.reload;P||this.search(u.__from?(i={},i[c||"page"]=1,i):void 0,void 0,!0,!0)}else p&&(p.hasOwnProperty("items")&&p.items||p.hasOwnProperty("ids"))&&this.control.bulkUpdate&&this.control.bulkUpdate(p,p.items)}var F=(o=e.reload)!==null&&o!==void 0?o:u.reload;F&&this.reloadTarget(V(F,r),r);var S=(l=e.redirect)!==null&&l!==void 0?l:u.redirect;S=S&&Q(S,r),S&&g.jumpTo(S,u,r)},f.prototype.handleDialogClose=function(t){t===void 0&&(t=!1);var e=this.props,r=e.store,n=e.stopAutoRefreshWhenModalIsOpen,i=e.silentPolling,a=e.interval;r.closeDialog(t),n&&a&&(this.timer=setTimeout(i?this.silentSearch:this.search,Math.max(a,1e3)))},f.prototype.openFeedback=function(t,e){var r=this;return new Promise(function(n){var i=r.props.store;i.setCurrentAction({type:"button",actionType:"dialog",dialog:t},r.props.resolveDefinitions),i.openDialog(e,void 0,function(a){n(a)},r.context)})},f.prototype.search=function(t,e,r,n,i){var a,o,l,s;return n===void 0&&(n=!1),i===void 0&&(i=!1),_(this,void 0,void 0,function(){var d,c,h,v,m,g,u,p,C,P,F,S,y,I,T,E,N,W,M,L,R,G,O,$,z,K,J,B,B,ne,Y;return x(this,function(w){switch(w.label){case 0:return d=this.props,c=d.store,h=d.api,v=d.messages,m=d.pageField,g=d.perPageField,u=d.interval,p=d.stopAutoRefreshWhen,C=d.stopAutoRefreshWhenModalIsOpen,P=d.silentPolling,F=d.syncLocation,S=d.syncResponse2Query,y=d.pickerMode,I=d.env,T=d.loadDataOnce,E=d.loadDataOnceFetchOnFilter,N=d.source,W=d.columns,M=d.dispatchEvent,r&&!y&&c.resetSelection(),L="",t&&typeof t.loadDataMode=="string"&&(L="load-more",delete t.loadDataMode),clearTimeout(this.timer),t&&c.updateQuery(t,!L&&F&&I&&I.updateLocation?I.updateLocation:void 0,m,g),this.lastQuery=c.query,R=k(c.data,c.query),G=!((a=this.props)===null||a===void 0)&&a.matchFunc&&typeof this.props.matchFunc=="string"?le(this.props.matchFunc,"items","itemsRaw","options"):void 0,q(h,R)?[4,c.fetchInitData(h,R,{successMessage:v&&v.fetchSuccess,errorMessage:v&&v.fetchFailed,autoAppend:!0,forceReload:n,loadDataOnce:T,source:N,silent:e,pageField:m,perPageField:g,loadDataMode:L,syncResponse2Query:S,columns:(o=c.columns)!==null&&o!==void 0?o:W,matchFunc:G,filterOnAllColumns:E===!1})]:[3,8];case 1:return O=w.sent(),qe(c)?($=c.page,z=c.lastPage,K=c.msg,J=c.error,i?[4,M==null?void 0:M("fetchInited",k(this.props.data,{responseData:O!=null&&O.ok?(l=c.data)!==null&&l!==void 0?l:{}:O,responseStatus:(O==null?void 0:O.status)===void 0?J?1:0:O==null?void 0:O.status,responseMsg:K}))]:[3,3]):[2,O];case 2:return B=w.sent(),B!=null&&B.prevented?[2,c.data]:[3,5];case 3:return[4,M==null?void 0:M("research",k(this.props.data,{responseData:O!=null&&O.ok?R??{}:O,responseStatus:(O==null?void 0:O.status)===void 0?J?1:0:O==null?void 0:O.status,responseMsg:K}))];case 4:if(B=w.sent(),B!=null&&B.prevented)return[2];w.label=5;case 5:return!T&&!c.data.items.length&&!u&&$>1&&z<$?[4,this.search(b(b({},c.query),(Y={},Y[m||"page"]=z,Y)),!1,void 0)]:[3,7];case 6:w.sent(),w.label=7;case 7:return O!=null&&O.ok&&u&&this.mounted&&(!p||!(C&&c.hasModalOpened||Z(p,k(c.data,c.query))))&&(this.timer=setTimeout(P?this.silentSearch.bind(this,void 0,void 0,!0):this.search.bind(this,void 0,void 0,void 0,!0),Math.max(u,1e3))),[3,9];case 8:N&&c.initFromScope(R,N,{columns:(s=c.columns)!==null&&s!==void 0?s:W,matchFunc:G}),w.label=9;case 9:return this.props.pickerMode&&(ne=U(this.props))&&this.syncSelectedFromPicker(ne),[2,c.data]}})})},f.prototype.silentSearch=function(t,e,r){return r===void 0&&(r=!1),this.search(t,!0,e,r)},f.prototype.handleChangePage=function(t,e,r){var n;return _(this,void 0,void 0,function(){var i,a,o,l,s,d,c,h,v,m,g,u,p,C,P;return x(this,function(F){switch(F.label){case 0:return i=this.props,a=i.store,o=i.syncLocation,l=i.env,s=i.pageField,d=i.perPageField,c=i.pageDirectionField,h=i.autoJumpToTopOnPagerChange,v=i.translate,m=i.api,g=i.loadDataOnce,m&&!g&&(!((n=this.control)===null||n===void 0)&&n.hasModifiedItems())?[4,Ve(v("CRUD.confirmLeaveUnSavedPage"))]:[3,2];case 1:if(u=F.sent(),!u)return[2];F.label=2;case 2:return p=(P={},P[s||"page"]=t,P),r&&(p[c||"pageDir"]=r),e&&(p[d||"perPage"]=e),a.updateQuery(p,o&&(l!=null&&l.updateLocation)?l.updateLocation:void 0,s,d),this.search(void 0,void 0,void 0),h&&this.control&&(this.control.scrollToTop?this.control.scrollToTop():(oe.findDOMNode(this.control).scrollIntoView(),C=window.scrollY,C&&window.scroll(0,C))),[2]}})})},f.prototype.syncSelectedFromPicker=function(t){var e=this.props,r=e.store,n=e.primaryField,i=e.strictMode,a=function(l,s){var d=l[n||"id"],c=s[n||"id"],h=i?d===c:d==c;return!!(l===s||d&&h)},o=t.map(function(l){var s;return se(l)||(l=(s={},s[n||"id"]=l,s)),de(r.items,function(d){return a(d,l)})||l});this.props.store.setSelectedItems(o)},f.prototype.handleItemChange=function(t,e,r){var n=this.props.store,i="".concat(r).split(".").map(function(o){return parseInt(o,10)}),a=_e(n.items,i,1,t);n.replaceItems(a)},f.prototype.handleSave=function(t,e,r,n,i,a){var o=this,l=this.props,s=l.store,d=l.quickSaveApi,c=l.quickSaveItemApi,h=l.primaryField,v=l.env,m=l.messages,g=l.reload,u=l.dispatchEvent;if(Array.isArray(t)){if(!q(d)){v&&v.alert("CRUD quickSaveApi is required");return}var p=k(s.data,{rows:t,rowsDiff:e,indexes:r,rowsOrigin:i});return t.length&&t[0].hasOwnProperty(h||"id")&&(p.ids=t.map(function(F){return F[h||"id"]}).join(",")),n&&(p.unModifiedItems=n),s.saveRemote(d,p,{successMessage:m&&m.saveFailed,errorMessage:m&&m.saveSuccess}).then(function(F){return _(o,void 0,void 0,function(){var S,y,I;return x(this,function(T){switch(T.label){case 0:return F?[4,u==null?void 0:u("quickSaveSucc",j(p,{result:F}))]:[2];case 1:return S=T.sent(),S!=null&&S.prevented?[2]:(y=(I=a==null?void 0:a.reload)!==null&&I!==void 0?I:g,[2,y?this.reloadTarget(V(y,p),p):this.search(void 0,void 0,!0,!0)])}})})}).catch(function(F){return _(o,void 0,void 0,function(){return x(this,function(S){switch(S.label){case 0:return[4,u==null?void 0:u("quickSaveFail",k(this.props.data,{error:F}))];case 1:return S.sent(),[2]}})})})}else{if(!q(c)){v&&v.alert("CRUD quickSaveItemApi is required!");return}var C=k(s.data,{item:t,modified:e,origin:i}),P=k(C,t);return s.saveRemote(c,P).then(function(F){return _(o,void 0,void 0,function(){var S,y,I;return x(this,function(T){switch(T.label){case 0:return F?[4,u==null?void 0:u("quickSaveItemSucc",j(C,{result:F}))]:[2];case 1:return S=T.sent(),S!=null&&S.prevented?[2]:(y=(I=a==null?void 0:a.reload)!==null&&I!==void 0?I:g,[2,y?this.reloadTarget(V(y,C),C):this.search(void 0,void 0,!0,!0)])}})})}).catch(function(F){return _(o,void 0,void 0,function(){return x(this,function(S){switch(S.label){case 0:return a!=null&&a.resetOnFailed&&this.control.reset(),[4,u==null?void 0:u("quickSaveItemFail",k(this.props.data,{error:F}))];case 1:return S.sent(),[2]}})})})}},f.prototype.handleSaveOrder=function(t,e){var r=this,n=this.props,i=n.store,a=n.saveOrderApi,o=n.orderField,l=n.primaryField,s=n.env,d=n.reload,c=n.dispatchEvent;if(!a){s&&s.alert("CRUD saveOrderApi is required!");return}var h=k(i.data),v,m,g=[],u=l&&e[0]&&e[0].hasOwnProperty(l);if(u||(h.idMap={}),h.insertAfter={},e.forEach(function(y){if(~t.indexOf(y))if(v){var I=u?v[l]:e.indexOf(v);h.insertAfter[I]=h.insertAfter[I]||[],u||(h.idMap[I]=v),h.insertAfter[I].push(u?y[l]:y)}else g.push(y);else v=y,m=m||y}),m&&g.length){var p=u?m[l]:e.indexOf(m);u||(h.idMap[p]=m),h.insertBefore={},h.insertBefore[p]=g.map(function(y){return u?y[l]:y})}else if(g.length){var C=g[0],P=u?C[l]:e.indexOf(C);u||(h.idMap[P]=C),h.insertAfter[P]=g.slice(1).map(function(y){return u?y[l]:y})}if(o){var F=(i.page-1)*i.perPage||0;e=ce(e,function(y,I,T){var E;return j(y,(E={},E[o]=(T===1?F:0)+I+1,E))})}if(h.rows=e.concat(),u){var S=function(y){return y.map(function(I){return"".concat(I[l]).concat(Array.isArray(I.children)&&I.children.length?"[".concat(S(I.children),"]"):"")}).join(",")};h.ids=S(e),o&&(h.order=ce(e,function(y){return xe(y,[l,o,"children"])}))}return q(a,h)&&i.saveRemote(a,h).then(function(y){return _(r,void 0,void 0,function(){var I;return x(this,function(T){switch(T.label){case 0:return y?[4,c==null?void 0:c("saveOrderSucc",j(h,{result:y}))]:[2];case 1:return I=T.sent(),I!=null&&I.prevented?[2]:(d&&this.reloadTarget(V(d,h),h),this.search(void 0,void 0,!0,!0),[2])}})})}).catch(function(y){return _(r,void 0,void 0,function(){return x(this,function(I){switch(I.label){case 0:return[4,c==null?void 0:c("saveOrderFail",k(this.props.data,{error:y}))];case 1:return I.sent(),[2]}})})})},f.prototype.handleSelect=function(t,e){var r=this.props,n=r.store,i=r.keepItemSelectionOnPageChange,a=r.primaryField,o=r.multiple,l=r.pickerMode,s=r.strictMode,d=r.onSelect,c=t;if(i&&n.selectedItems.length){var h;n.items.length>t.length+e.length?h=function(g,u){return(g.__pristine||g)===(u.__pristine||u)}:h=function(g,u){var p=g[a||"id"],C=u[a||"id"],P=s?p===C:p==C;return g===u||p&&P};var v=t.concat();c=n.selectedItems.map(function(g){var u=v.findIndex(function(p){return h(p,g)});return~u?v.splice(u,1)[0]:de(e,function(p){return h(p,g)})?null:g}).filter(function(g){return g}).concat(v)}var m=n.items.filter(function(g){return!c.find(function(u){return(u.__pristine||u)===g})}).map(function(g){return e.find(function(u){return u.__pristine===g})||g});l&&o===!1&&c.length>1&&m.push.apply(m,c.splice(0,c.length-1)),n.setSelectedItems(c),n.setUnSelectedItems(m),d&&d(c,m)},f.prototype.handleChildPopOverOpen=function(t){this.props.interval&&t&&~["dialog","drawer"].indexOf(t.mode)&&(this.props.stopAutoRefreshWhenModalIsOpen&&clearTimeout(this.timer),this.props.store.setInnerModalOpened(!0))},f.prototype.handleChildPopOverClose=function(t){var e=this.props,r=e.stopAutoRefreshWhenModalIsOpen,n=e.silentPolling,i=e.interval;t&&~["dialog","drawer"].indexOf(t.mode)&&(this.props.store.setInnerModalOpened(!1),r&&i&&(this.timer=setTimeout(n?this.silentSearch:this.search,Math.max(i,1e3))))},f.prototype.handleQuery=function(t,e,r,n,i){var a,o=this.props,l=o.store,s=o.syncLocation,d=o.env,c=o.pageField,h=o.perPageField,v=o.loadDataOnceFetchOnFilter;return l.updateQuery(n?b((a={},a[c||"page"]=1,a),t):t,s&&d&&d.updateLocation?d.updateLocation:void 0,c,h,r),this.search(void 0,void 0,i??r,e??v===!0)},f.prototype.reload=function(t,e,r,n,i,a){return e?this.receive(e,void 0,i,a==null?void 0:a.resetPage,!0):this.search(void 0,void 0,!0,!0)},f.prototype.receive=function(t,e,r,n,i){return this.handleQuery(t,!0,r,n,i)},f.prototype.reloadTarget=function(t,e){},f.prototype.closeTarget=function(t){},f.prototype.doAction=function(t,e,r,n){var i;return r===void 0&&(r=!1),_(this,void 0,void 0,function(){var a,o,l;return x(this,function(s){switch(s.label){case 0:return a=this.props.store,t.actionType&&["submitQuickEdit","toggleExpanded","setExpanded","initDrag","cancelDrag","selectAll","clearAll"].includes(t.actionType)?[2,(i=this.control)===null||i===void 0?void 0:i.doAction(t,e,r,n)]:[3,1];case 1:return t.actionType!=="select"?[3,3]:[4,We(a.items,e,n==null?void 0:n.index,n==null?void 0:n.condition)];case 2:return o=s.sent(),l=a.items.filter(function(d){return!o.includes(d)}),[2,this.handleSelect(o,l)];case 3:return[2,this.handleAction(void 0,t,e,r)]}})})},f.prototype.unSelectItem=function(t,e){var r=this.props.store,n=r.selectedItems.concat(),i=r.unSelectedItems.concat(),a=n.indexOf(t);~a&&i.push.apply(i,n.splice(a,1)),r.setSelectedItems(n),r.setUnSelectedItems(i)},f.prototype.clearSelection=function(){var t=this.props,e=t.store,r=t.itemCheckableOn,n=ue(Ke(e.selectedItems,function(l){return!r||Z(r,l)}),2),i=n[0],a=n[1],o=e.unSelectedItems.concat(i);e.setSelectedItems(a),e.setUnSelectedItems(o)},f.prototype.hasBulkActionsToolbar=function(){var t=this.props,e=t.headerToolbar,r=t.footerToolbar,n=function(i){return~["bulkActions","bulk-actions"].indexOf(i.type||i)};return Array.isArray(e)&&pe(e,n)||Array.isArray(r)&&pe(r,n)},f.prototype.hasBulkActions=function(){var t=this.props,e=t.bulkActions;t.itemActions;var r=t.store;if(!e||!e.length)return!1;var n=[],i=r.mergedData;return e&&e.length&&(n=e.map(function(a){return b(b({},a),ee(a,i))}).filter(function(a){return!a.hidden&&a.visible!==!1})),n.length},f.prototype.renderBulkActions=function(t){var e=this,r,n=this.props,i=n.bulkActions,a=n.itemActions,o=n.store,l=n.render,s=n.classnames,d=n.primaryField;if(!i||!i.length)return null;var c=o.selectedItems,h=o.unSelectedItems,v=[],m=[],g=k(o.mergedData,b(b({currentPageData:(((r=o.mergedData)===null||r===void 0?void 0:r.items)||[]).concat()},o.eventContext),{rows:c.concat(),items:c.concat(),ids:c.map(function(p){return p.hasOwnProperty(d)?p[d]:null}).filter(function(p){return p}).join(",")}));i&&i.length&&(!a||!a.length||c.length>1)&&(v=i.map(function(p){return b(b({},p),ee(p,g))}).filter(function(p){return!p.hidden&&p.visible!==!1}));var u=k(o.data,c.length?c[0]:{});return a&&c.length<=1&&(m=a.map(function(p){return b(b({},p),ee(p,u))}).filter(function(p){return!p.hidden&&p.visible!==!1})),v.length||m.length?A.createElement("div",{className:s("Crud-actions")},v.map(function(p,C){return l("bulk-action/".concat(C),b(b({},H(p,["visibleOn","hiddenOn","disabledOn"])),{type:p.type||"button",ignoreConfirm:!0}),{key:"bulk-".concat(C),data:g,disabled:p.disabled||(p.requireSelected!==!1?!c.length:!1),onAction:e.handleBulkAction.bind(e,c.concat(),h.concat())})}),m.map(function(p,C){return l("bulk-action/".concat(C),b(b({},H(p,["visibleOn","hiddenOn","disabledOn"])),{type:"button"}),{key:"item-".concat(C),data:u,disabled:p.disabled||c.length!==1,onAction:e.handleItemAction.bind(e,p,u)})})):null},f.prototype.renderPagination=function(t){var e=this.props,r=e.store,n=e.render,i=e.classnames,a=e.alwaysShowPagination,o=e.perPageAvailable,l=e.testIdBuilder,s=r.page,d=r.lastPage;if(r.mode!=="simple"&&r.lastPage<2&&!a)return null;var c={};if(Array.isArray(o)&&(c.perPageAvailable=o),typeof t!="string"){Object.assign(c,t);var h=t.showPageInput;c.showPageInput=h===!0||d>9&&h==null,c.total=ie(t.total,r.data)}else c.showPageInput=d>9;return A.createElement("div",{className:i("Crud-pager")},n("pagination",{type:"pagination",testIdBuilder:l==null?void 0:l.getChild("pagination")},b(b({},c),{activePage:s,lastPage:d,hasNext:r.hasNext,mode:r.mode,perPage:r.perPage,popOverContainer:this.parentContainer,onPageChange:this.handleChangePage})))},f.prototype.renderStatistics=function(){var t=this.props,e=t.store,r=t.classnames,n=t.translate,i=t.alwaysShowPagination;return e.lastPage<=1&&!i?null:A.createElement("div",{className:r("Crud-statistics")},n("CRUD.stat",{page:e.page,lastPage:e.lastPage,total:e.total}))},f.prototype.renderSwitchPerPage=function(t){var e=this,r=this.props,n=r.mobileUI,i=r.store,a=r.perPageAvailable,o=r.classnames,l=r.classPrefix,s=r.translate,d=r.testIdBuilder,c=t.items;if(!c.length)return null;var h=n?(a||[5,10,20,50,100]).map(function(v){return{label:v+" 条/页",value:v+""}}):(a||[5,10,20,50,100]).map(function(v){return{label:v,value:v+""}});return A.createElement("div",{className:o("Crud-pageSwitch")},n?null:A.createElement("span",null,s("CRUD.perPage")),A.createElement(Me,{classPrefix:l,searchable:!1,placeholder:s("Select.placeholder"),options:h,value:i.perPage+"",onChange:function(v){return e.handleChangePage(1,v.value)},clearable:!1,popOverContainer:this.parentContainer,testIdBuilder:d==null?void 0:d.getChild("perPage")}))},f.prototype.renderLoadMore=function(){var t=this,e=this.props,r=e.store,n=e.classPrefix,i=e.classnames,a=e.translate,o=e.testIdBuilder,l=r.page,s=r.lastPage;return A.createElement("div",{className:i("Crud-loadMore")},A.createElement(he,b({disabled:l>=s,disabledTip:a("CRUD.loadMoreDisableTip"),classPrefix:n,onClick:function(){return t.search({page:l+1,loadDataMode:"load-more"})},size:"sm"},o==null?void 0:o.getChild("loadMore").getTestId()),a("CRUD.loadMore")))},f.prototype.renderFilterToggler=function(){var t,e,r,n=this.props,i=n.store,a=n.classnames,o=n.translate,l=n.filterTogglable;if(!i.filterTogggable)return null;var s=se(l)?b({},l):{};return i.filterVisible&&(s.icon=(t=s.activeIcon)!==null&&t!==void 0?t:s.icon,s.label=(e=s.activeLabel)!==null&&e!==void 0?e:s.label),A.createElement("button",{onClick:function(){return i.setFilterVisible(!i.filterVisible)},className:a("Button Button--size-default Button--default",{"is-active":i.filterVisible})},s.icon?A.createElement(fe,{icon:s.icon,className:"icon m-r-xs"}):(s==null?void 0:s.icon)!==!1?A.createElement(fe,{icon:"filter",className:"icon m-r-xs"}):null,(r=s==null?void 0:s.label)!==null&&r!==void 0?r:o("CRUD.filter"))},f.prototype.renderExportCSV=function(t){var e=this.props,r=e.store,n=e.classPrefix,i=e.translate,a=e.loadDataOnce,o=t.api,l=t.filename;return A.createElement(he,{classPrefix:n,onClick:function(){return r.exportAsCSV({loadDataOnce:a,api:o,filename:l,data:r.filterData})}},t.label||i("CRUD.exportCSV"))},f.prototype.renderToolbar=function(t,e,r,n){var i=this;if(e===void 0&&(e=0),r===void 0&&(r={}),!t)return null;var a=this.props,o=a.render,l=a.store,s=a.mobileUI,d=a.translate,c=a.testIdBuilder,h=t.type||t;if(h==="bulkActions"||h==="bulk-actions")return this.renderBulkActions(r);if(h==="pagination")return this.renderPagination(t);if(h==="statistics")return this.renderStatistics();if(h==="switch-per-page")return this.renderSwitchPerPage(r);if(h==="load-more")return this.renderLoadMore();if(h==="filter-toggler")return this.renderFilterToggler();if(h==="export-csv")return this.renderExportCSV(t);if(h==="reload"){var v={label:"",icon:"fa fa-sync",tooltip:d("reload"),tooltipPlacement:"top",type:"button"};return typeof t=="object"&&(v=b(b({},v),H(t,["type","align"]))),o("toolbar/".concat(e),v,{onAction:function(){i.reload()}})}else if(Array.isArray(t)){var m=t.filter(function(P){return te(P,l.toolbarData)}).map(function(P,F){return{dom:i.renderToolbar(P,F,r,n),toolbar:P}}).filter(function(P){return P.dom}),g=m.length,u=this.props.classnames;return g?A.createElement("div",b({className:u("Crud-toolbar"),key:e},c==null?void 0:c.getChild("toolbar").getTestId()),m.map(function(P,F){var S=P.toolbar,y=P.dom,I=S.type||S,T=S.align||(I==="pagination"?"right":"left");return A.createElement("div",{key:S.id||F,className:u("Crud-toolbar-item",T?"Crud-toolbar-item--".concat(T):"",{"is-mobile":s})},y)})):null}var p=n?n(t,e):void 0;if(p!==void 0)return p;var C=r.$$editable;return o("toolbar/".concat(e),t,{data:l.toolbarData,page:l.page,lastPage:l.lastPage,perPage:l.perPage,total:l.total,onQuery:this.handleQuery,onAction:this.handleAction,onChangePage:this.handleChangePage,onBulkAction:this.handleBulkAction,$$editable:C})},f.prototype.renderHeaderToolbar=function(t,e){var r=this.props,n=r.toolbar,i=r.toolbarInline,a=r.headerToolbar;return n&&(Array.isArray(a)?a=i?a.concat(n):[a,n]:a?a=[a,n]:a=n),this.renderToolbar(a||[],0,t,e)},f.prototype.renderFooterToolbar=function(t,e){var r=this.props,n=r.toolbar,i=r.toolbarInline,a=r.footerToolbar;return n&&(Array.isArray(a)?a=i?a.concat(n):[a,n]:a?a=[a,n]:a=n),this.renderToolbar(a,0,t,e)},f.prototype.renderTag=function(t,e){var r=this.props,n=r.classnames,i=r.labelField,a=r.labelTpl,o=r.primaryField,l=r.valueField;r.translate;var s=r.env,d=r.itemCheckableOn,c=d?Z(d,t):!0;return A.createElement("div",{key:e,className:n("Crud-value",c?"":"is-disabled")},A.createElement("span",{className:n("Crud-valueIcon"),onClick:this.unSelectItem.bind(this,t,e)},"×"),A.createElement("span",{className:n("Crud-valueLabel")},a?A.createElement(Re,{html:Q(a,t),filterHtml:s.filterHtml}):ve(t,i||"label")||ve(t,l||o||"id")))},f.prototype.renderSelection=function(){var t=this,e=this.props,r=e.store,n=e.classPrefix,i=e.classnames;e.labelField,e.labelTpl,e.primaryField,e.valueField;var a=e.translate;e.env;var o=e.popOverContainer,l=e.multiple,s=e.maxTagCount,d=e.overflowTagPopover,c=e.keepItemSelectionOnPageChange;if(!r.selectedItems.length||!c||l===!1)return null;var h=r.selectedItems.length,v=r.selectedItems,m=l!==!1&&je(s,{start:0,end:h,left:"inclusive",right:"exclusive"});return m&&(v=me(me([],ue(r.selectedItems.slice(0,s)),!1),[{label:"+ ".concat(h-s," ..."),value:"__overflow_tag__"}],!1)),A.createElement("div",{className:i("Crud-selection")},A.createElement("div",{className:i("Crud-selectionLabel")},a("CRUD.selected",{total:r.selectedItems.length})),v.map(function(g,u){return m&&u===s?A.createElement(Be,{key:u,container:o,tooltip:b(b({placement:"top",trigger:"hover",showArrow:!1,offset:[0,-10],tooltipClassName:i("Crud-selection-overflow",d==null?void 0:d.tooltipClassName),title:a("已选项")},H(d,["children","content","tooltipClassName"])),{children:function(){return A.createElement("div",{className:i("".concat(n,"Crud-selection-overflow-wrapper"))},r.selectedItems.slice(s,h).map(function(p,C){var P=C+s;return t.renderTag(p,P)}))}})},A.createElement("div",{key:u,className:i("Crud-value")},A.createElement("span",{className:i("Crud-valueLabel")},g.label))):t.renderTag(g,u)}),A.createElement("a",{onClick:this.clearSelection,className:i("Crud-selectionClear")},a("clear")))},f.prototype.renderFilter=function(){var t,e=this.props,r=e.store,n=e.render,i=e.classnames,a=e.filter,o=e.translate,l=e.testIdBuilder,s=e.filterCanAccessSuperData,d=s===void 0?!0:s;return!a&&(!r.filterTogggable||r.filterVisible)?null:n("filter",b(b({title:o("CRUD.filter"),mode:"inline",submitText:o("search")},a),{type:"form",api:null,testIdBuilder:l==null?void 0:l.getChild("filter")}),{key:"filter",panelClassName:i("Crud-filter",a.panelClassName||"Panel--default"),data:r.filterData,onReset:this.handleFilterReset,onSubmit:this.handleFilterSubmit,onInit:this.handleFilterInit,formStore:void 0,canAccessSuperData:(t=a==null?void 0:a.canAccessSuperData)!==null&&t!==void 0?t:d})},f.prototype.filterItemIndex=function(t){var e,r=this.props.store,n="".concat(t).split(".").map(function(a){return parseInt(a,10)});if(!Array.isArray(r.data.items))return t;var i=(e=r.data.items)===null||e===void 0?void 0:e[n[0]];return i&&(n[0]=r.items.findIndex(function(a){return(a.__pristine||a)===(i.__pristine||i)})),n.join(".")},f.prototype.filterBodySchema=function(t){return t},f.prototype.renderBody=function(){var t,e=this.props;e.className,e.style;var r=e.bodyClassName,n=e.filter,i=e.render,a=e.store,o=e.mode;e.syncLocation,e.children;var l=e.bulkActions,s=e.pickerMode,d=e.multiple,c=e.strictMode,h=e.valueField,v=e.primaryField;e.value;var m=e.hideQuickSaveBtn,g=e.itemActions,u=e.classnames,p=e.keepItemSelectionOnPageChange,C=e.maxKeepItemSelectionLength,P=e.maxItemSelectionLength;e.onAction;var F=e.popOverContainer;e.translate,e.onQuery;var S=e.autoGenerateFilter;e.onSelect;var y=e.autoFillHeight,I=e.onEvent;e.onSave,e.onSaveOrder,e.onPopOverOpened,e.onPopOverClosed,e.onSearchableFromReset,e.onSearchableFromSubmit,e.onSearchableFromInit,e.headerToolbarRender,e.footerToolbarRender;var T=e.testIdBuilder,E=e.id,N=e.filterCanAccessSuperData,W=N===void 0?!0:N,M=e.selectable,L=M===void 0?!1:M,R=Ee(e,["className","style","bodyClassName","filter","render","store","mode","syncLocation","children","bulkActions","pickerMode","multiple","strictMode","valueField","primaryField","value","hideQuickSaveBtn","itemActions","classnames","keepItemSelectionOnPageChange","maxKeepItemSelectionLength","maxItemSelectionLength","onAction","popOverContainer","translate","onQuery","autoGenerateFilter","onSelect","autoFillHeight","onEvent","onSave","onSaveOrder","onPopOverOpened","onPopOverClosed","onSearchableFromReset","onSearchableFromSubmit","onSearchableFromInit","headerToolbarRender","footerToolbarRender","testIdBuilder","id","filterCanAccessSuperData","selectable"]);return i("body",b(b({},this.filterBodySchema(R)),{id:E,onEvent:this.filterOnEvent(I),columns:(t=a.columns)!==null&&t!==void 0?t:R.columns,type:o||"table"}),{key:"body",className:u("Crud-body",r),ref:this.controlRef,autoGenerateFilter:!n&&S,filterCanAccessSuperData:W,autoFillHeight:y,selectable:!!(this.hasBulkActionsToolbar()&&this.hasBulkActions()||s||L),itemActions:g,multiple:d===void 0?!!(l&&l.length>0):d,selected:a.selectedItemsAsArray,strictMode:c,keepItemSelectionOnPageChange:p,maxKeepItemSelectionLength:C,maxItemSelectionLength:P,valueField:h||v,primaryField:v,hideQuickSaveBtn:m,items:a.data.items,fullItems:a.itemsAsArray,query:a.query,orderBy:a.query.orderBy,orderDir:a.query.orderDir,popOverContainer:F,onAction:this.handleAction,onItemChange:this.handleItemChange,onSave:this.handleSave,onSaveOrder:this.handleSaveOrder,onQuery:this.handleQuery,onSelect:this.handleSelect,onPopOverOpened:this.handleChildPopOverOpen,onPopOverClosed:this.handleChildPopOverClose,onSearchableFromReset:this.handleFilterReset,onSearchableFromSubmit:this.handleFilterSubmit,onSearchableFromInit:this.handleFilterInit,headerToolbarRender:this.renderHeaderToolbar,footerToolbarRender:this.renderFooterToolbar,data:a.mergedData,loading:a.loading,host:this,filterItemIndex:this.filterItemIndex,onDbClick:this.props.rowDbClick,testIdBuilder:T==null?void 0:T.getChild("body")})},f.prototype.render=function(){var t=this.props,e=t.className,r=t.style,n=t.render,i=t.store,a=t.classnames;t.translate;var o=t.testIdBuilder,l=t.id;return A.createElement("div",b({className:a("Crud",e,{"is-loading":i.loading,"is-mobile":we()}),style:r,"data-id":l,"data-role":"container"},o==null?void 0:o.getChild("wrapper").getTestId()),this.renderFilter(),this.renderSelection(),this.renderBody(),n("dialog",b(b({},i.action&&i.action.dialog),{type:"dialog"}),{key:"dialog",data:i.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:i.dialogOpen}))},f.propsList=["bulkActions","itemActions","mode","orderField","syncLocation","toolbar","toolbarInline","messages","value","options","multiple","valueField","defaultParams","bodyClassName","perPageAvailable","pageField","perPageField","pageDirectionField","hideQuickSaveBtn","autoJumpToTopOnPagerChange","interval","silentPolling","stopAutoRefreshWhen","stopAutoRefreshWhenModalIsOpen","api","affixHeader","columnsTogglable","placeholder","tableClassName","headerClassName","footerClassName","headerToolbar","footerToolbar","filterTogglable","filterDefaultVisible","autoGenerateFilter","syncResponse2Query","keepItemSelectionOnPageChange","labelTpl","labelField","loadDataOnce","loadDataOnceFetchOnFilter","source","header","columns","size","onChange","onInit","onSaved","onSave","onQuery","formStore","autoFillHeight","maxTagCount","overflowTagPopover","parsePrimitiveQuery","matchFunc"],f.defaultProps={toolbarInline:!0,headerToolbar:["bulkActions"],footerToolbar:["statistics","pagination"],primaryField:"id",syncLocation:!0,pageField:"page",perPageField:"perPage",pageDirectionField:"pageDir",hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,filterTogglable:!1,filterDefaultVisible:!0,loadDataOnce:!1,autoFillHeight:!1,parsePrimitiveQuery:!0},f}(A.Component),Xe=function(D){re(f,D);function f(t,e){var r=D.call(this,t)||this,n=e;return n.registerComponent(r),r}return f.prototype.componentWillUnmount=function(){D.prototype.componentWillUnmount.call(this);var t=this.context;t.unRegisterComponent(this)},f.prototype.reload=function(t,e,r,n,i,a){var o,l=this.context;return a!=null&&a.index||a!=null&&a.condition?(o=this.control)===null||o===void 0?void 0:o.reload("",e,r,void 0,void 0,a):t?l.reload(e?"".concat(t,"?").concat(ge(e)):t,r):D.prototype.reload.call(this,t,e,r,n,i,a)},f.prototype.receive=function(t,e,r,n,i){return _(this,void 0,void 0,function(){var a;return x(this,function(o){return a=this.context,e?[2,a.send(e,t)]:[2,D.prototype.receive.call(this,t,void 0,r,n,i)]})})},f.prototype.reloadTarget=function(t,e){var r=this.context;r.reload(t,e)},f.prototype.closeTarget=function(t){var e=this.context;e.close(t)},f.prototype.setData=function(t,e,r,n){var i,a,o;return _(this,void 0,void 0,function(){var l,s,d;return x(this,function(c){return l=this.props.store,r!==void 0||n!==void 0?[2,(a=(i=this.control)===null||i===void 0?void 0:i.setData)===null||a===void 0?void 0:a.call(i,t,e,r,n)]:(s=(t==null?void 0:t.total)||(t==null?void 0:t.count),d=(o=t.rows)!==null&&o!==void 0?o:t.items,s!==void 0&&l.updateTotal(parseInt(s,10)),[2,l.updateData(b(b({},t),d?{items:d}:{}),void 0,e)])})})},f.prototype.getData=function(){var t=this.props,e=t.store,r=t.data;return e.getData(r)},f.contextType=Qe,f}(Ye),tt=function(D){re(f,D);function f(){return D!==null&&D.apply(this,arguments)||this}return f=Ne([Le({type:"crud",storeType:Ue.name,isolateScope:!0})],f),f}(Xe);export{tt as CRUDRenderer,Xe as CRUDRendererBase,Ye as default};
